function RefereshCartQuantity(){$.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:"/Cart/GetCartCount",success:function(n){$("#cartCounter").text(n);$("#cartCounter2").text(n);n>0?$("#view-cart").css("display","block"):$("#view-cart").css("display","none")},error:function(){}})}function ToastSuccess(n){toastr.success(n,"Success",{ProgressEvent:!0,positionClass:"toast-top-right",timeOut:3e3})}function AddToCart(n,t,i,r,u){$(".loader").css("visibility","visible");let f=$(n).attr("id");console.log(f);$.ajax({type:"GET",url:"/Cart/AddToCart/"+t+"/"+r+"/"+u,success:function(i){i.status=="success"&&($("#cartCounter").text(i.count),ToastSuccess("Item Added to Cart Successfully"),$(n).replaceWith(`
                                              <div Id="replace-${t}" class="def-number-input number-input safari_only mb-0 w-100;">
                                             <div class="input-group mb-3" style="width: 120px;margin: auto;">
                                                 <div class="input-group-prepend">
                                                  
                                                     <button onclick="updateQuantity(${t},1,-1)" class="btn btn-outline-secondary" type="button" style="padding:6px 10px;"><i class="bi bi-dash-lg"></i></button>
                                                 </div>
                                                 <input Id="qtyInpt-${t}" class="form-control sm-control text-center" size="2" min="0" name="quantity" value="1" readonly />
                                                 <div class="input-group-prepend">
                                                     
                                                     <button onclick="updateQuantity(${t},1,1)" class="btn btn-outline-secondary" type="button" style="padding:6px 10px;"><i class="bi bi-plus-lg"></i></button>
                                                 </div>
                                             </div>
                                         </div>
                                      `),$("#cartCounter2").text(i.count),$(".loader").css("visibility","hidden"),$("#view-cart").css("display","block"))}})}function SwalFire(){$(document).on("click",".btn-delete",function(n){n.preventDefault();const t=$(this).data("id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&deleteItem(t)})})}function updateQuantity(n,t,i){$(".loader").css("visibility","visible");let u="#qtyInpt-"+n,r=t+i,f="#replace-"+n;t>=1&&i==1||t>1&&i==-1?$.ajax({url:"Cart/UpdateQuantity/"+n+"/"+i,type:"GET",success:function(t){if(t>0){let t=window.location.pathname;t=="/Cart"?GetCartData():(console.log(u),$(u).val(r),$(f).replaceWith(`
      <div Id="replace-${n}" class="def-number-input number-input safari_only mb-0 w-100;">
     <div class="input-group mb-3" style="width: 120px;margin: auto;">
         <div class="input-group-prepend">

             <button onclick="updateQuantity(${n},${r},-1)" class="btn btn-outline-secondary" type="button" style="padding:6px 10px;"><i class="bi bi-dash-lg"></i></button>
         </div>
         <input Id="qtyInpt-${n}" class="form-control sm-control text-center" size="2" min="0" name="quantity" value="${r}" readonly />
         <div class="input-group-prepend">
             
             <button onclick="updateQuantity(${n},${r},1)" class="btn btn-outline-secondary" type="button" style="padding:6px 10px;"><i class="bi bi-plus-lg"></i></button>
         </div>
     </div>
 </div>
    `))}$(".loader").css("visibility","hidden")}}):$(".loader").css("visibility","hidden")}function deleteItem(n){n>0&&$.ajax({type:"GET",url:"/Cart/DeleteItem/"+n,success:function(n){n>0&&(GetCartData(),RefereshCartQuantity(),ToastSuccess("Item removed from cart successfully."))}})}function GetCartData(){$(".loader").css("visibility","visible");$.ajax({url:"/Cart/GetCartDetails",type:"get",success:function(n){let e=n.id,o=n.userId,r=n.total,u=n.tax,f=n.grandTotal,s=new Date(n.createdDate),i=n.items;$("#total").text(r);$("#tax").text(u);$("#grandTotal").text(f);$("#cartItems").text(i.length);let t=$("#cart-table tbody");t.empty();t.html("");$.each(i,function(n,i){let r=`
                <tr>
                         <td>
                                 <img class="cartItemImg" src="${i.imageUrl}" />
                                  <div>${i.name}</div>
                       </td>
                       <td>${i.unitPrice}</td>
                       <td>
                           <div class="def-number-input number-input safari_only mb-0 w-100 ">
                               <div class="input-group mb-3 cartItemQty" style="margin: auto;">
                                   <div class="input-group-prepend">
                                       <button onclick="updateQuantity('${i.itemId}','${i.quantity}',-1)" class="btn btn-outline-secondary" type="button">-</button>
                                   </div>
                                   <input class="form-control sm-control text-center" size="2" min="0" name="quantity" value="${i.quantity}" readonly />
                                   <div class="input-group-prepend">
                                       <button onclick="updateQuantity('${i.itemId}','${i.quantity}',1)" class="btn btn-outline-secondary" type="button">+</button>
                                   </div>
                               </div>
                           </div>
                       </td>
                       <td>${i.total}</td>
                       <td>
                           <a href="javascript:void(0);" data-id="${i.itemId}" class="btn-delete">
                               <i class="bi bi-trash text-danger"></i>
                           </a>
                       </td>
                 </tr>
                        `;t.append(r)});$("#loader").css("visibility","hidden")},error:function(){$("#loader").css("visibility","hidden")}})}function ToastSuccess(n){toastr.success(n,"Success",{ProgressEvent:!0,positionClass:"toast-top-right",timeOut:3e3})}$(document).ready(function(){RefereshCartQuantity()});